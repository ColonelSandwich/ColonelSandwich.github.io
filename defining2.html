<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Screens and Windows</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <script src="script.js"></script>
</head>

<body onload="treesProjectionDemo()">
  <!--Parallax background-->
  <div class="parallaxBG">
    <!--Header-->
    <header class="row">
      <div class="p-4 col-lg bg-primary text-white">
        <h1 class="text-center">Michael's Super Scaler "Pseudo 3D" Page</h1>
      </div>
    </header>

    <!--Aside Carousel-->
    <aside id="carousel_top">
      <div>

        <!-- Carousel -->
        <div id="carouselpics" class="carousel slide" data-bs-ride="carousel">

          <!--Picture Carousel-->
          <div class="carousel-inner">

            <!--Image 1-->
            <div class="carousel-item active text-center carouselbg1">
              <div class="col-lg bg-dark bg-opacity-75 text-white">
                <h3>Home</h3>
                <p>What's this site about? This should tell you!</p>
              </div>
            </div>

            <!--Image 2-->
            <div class="carousel-item text-center carouselbg2">
              <div class="col-lg bg-dark bg-opacity-75 text-white">
                <h3>What is a Super Scaler?</h3>
                <p>A brief definition and history of the technique behind many arcade hits from the mid 80's to the
                  mid 90's</p>
              </div>
            </div>

            <!--Image 3-->
            <div class="carousel-item text-center carouselbg3">
              <div class="col-lg bg-dark bg-opacity-75 text-white">
                <h3>Defining "Pseudo 3D"</h3>
                <p>Attempting to define a nebulous and meaningless term, while also instead talking about windows</p>
              </div>
            </div>

            <!--Image 4-->
            <div class="carousel-item text-center carouselbg4">
              <div class="col-lg bg-dark bg-opacity-75 text-white">
                <h3>Screens and Windows</h3>
                <p>Properly delving into Perspective Projection</p>
              </div>
            </div>

            <!--Image 5-->
            <div class="carousel-item text-center carouselbg5">
              <div class="col-lg bg-dark bg-opacity-75 text-white">
                <h3>Making a Super Scaler</h3>
                <p>More rambling about Projection</p>
              </div>
            </div>
          </div>

          <!--Scroll Left/Right-->
          <button class="carousel-control-prev" aria-label="Left button" type="button" data-bs-target="#carouselpics" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
          </button>
          <button class="carousel-control-next" aria-label="Right button" type="button" data-bs-target="#carouselpics" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
          </button>
        </div>
      </div>
    </aside>

    <!--Navigation Bar-->
    <nav id="navbar_top" class="navbar my-1 navbar-expand-sm bg-dark navbar-dark">
      <!--Collapse Button-->
      <button type="button"  aria-label="Expand navbar" data-bs-toggle="collapse" data-bs-target="#navbar" class="navbar-toggler"><span
          class="navbar-toggler-icon"></span></button>
      <!--Collapse-->
      <div class="collapse navbar-collapse" id="navbar">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" href="index.html">Home</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="intro.html">What is a Super Scaler?</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="defining.html">About "Pseudo 3D"</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="defining2.html">Screens and Windows</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="defining3.html">Making a Super Scaler</a>
          </li>
        </ul>
      </div>
    </nav>

    <!--Main Page Content-->
    <main>
      <!--Parallax background-->
      <div class="parallaxBG">
        <div class="p-4 col-lg bg-dark bg-opacity-75 text-white">
          <h2 class="headertext">Perspective Projection Part 1: Screens and Windows!</h2></br>

          <p>Let's go back to our example from the previous page. Our viewer or player sits outside of the world of
            trees we've created, and they need to look through a window in order to see it. This window, however, is not
            any ordinary window. It basically takes what can be seen on the other side of the window and essentially
            "flattens" it (this window is formally known as a "projection plane")</p></br>

          <p>Remember, the screen you're viewing this on is only two-dimensional! In order to render a 3D scene, your
            device has to take this 3D scene and "flatten" it to a 2D image on your screen. The same applies to our
            example, where our 2D game world of terrible trees needs to be "flattened" (or more accurately, projected!)
            onto the 1D screen represented by our blue line.</p></br></br>

          <p>So let's figure this out! First, let's simplify this screen to just one tree. If we can figure out how to
            project one tree then we can absolutely project all of them! I've also decided to make it interactive, so
            you can change the position of the tree in the scene. Give it a whirl~!</p>

          <!--Slider!-->
          <label for="canvas1-sliderX">X position</label></br>
          <input type="range" id="canvas1-sliderX" name="sliderX" min="32" max="288"></br>
          <label for="canvas1-sliderY">Y position</label></br>
          <input type="range" id="canvas1-sliderY" name="sliderY" min="32" max="192"></br>

          <!--Canvas-->
          <canvas id="canvas1" class="canvasborder"
            aria-label="Canvas with ONE poorly drawn tree at a user-specified X and Y position." role="img" width="320"
            height="320"></canvas>

          <p>Did you have fun? You better have, this canvas stuff is tedious!</p></br></br></br>

          <h2 class="headertext">Projection Basics</h2></br>

          <p>You may have noticed that I drew a line between the viewer and our lovely little tree. This line is
            going to help us project the object onto our screen, because <u>where the line intersects with the screen is
              the point where our object projects to!</u></p>

          <img class='center' alt="Picture describing the point we need to find to project the object onto our screen." src='Pictures/projection_1.png'>

          <p>A crude diagram showing us our ultimate objective... if we can do this in 2D then 3D will be a cinch!</p>
          </br>

          <p>Now brush up on some of those geometry lessons you haven't thought about in years, because we're gonna need
            'em! Let's try drawing a right triangle using the line between the viewer and the object, like so:</p>

          <img class='center' alt="Picture with a triangle drawn between the viewer and an object" src='Pictures/projection_2.png'>

          <p>The adjacent side is labeled as Y and the opposite side is labeled as X, with Y being the y distance
            between the viewer and the object and X being the x distance between the viewer and the object. And no,
            we're not going to need trigonometry (yet!)</br></br>For those with a keen eye, you may have noticed that
            there isn't one, but TWO triangles here: the one we drew and a smaller version of that same triangle created
            by the intersection between the triangle and the clipping plane:</p>

          <img class='center' alt="Same as last picture with a second triangle added between the viewer and the screen" src='Pictures/projection_3.png'>

          <p>The second triangle is highlighted in red!</br>I went ahead and labeled the adjacent side of the smaller
            triangle "dy," which is the distance between the viewer and the screen.</br>Thanks to this, we can actually
            establish a scale ratio between the two triangles that will solve the problem for us.</p>

          <img class='center' alt="Picture describing the ratio between the triangles" src='Pictures/projection_4.png'>

          <p>The scale ratio is simply dy/Y, which we can use to find the opposite side of the smaller triangle (labeled
            "dx") simply by multiplying X by the scale ratio.</br>So dx = scale ratio * X, that means we've found the
            point right??? Well..... it's probably better to just show you: </p>

          <img class='center' alt="Picture illustrating an error with using just dx alone to get the point" src='Pictures/projection_oops.png'>

          <p>We were close! However, X is the distance between the object and the viewer, and if the distance is nothing
            then the projection point also lies at zero. We actually need to add half of the length of the screen's
            width to get the right result!</br></br>So the final formula comes around to: </p>

          <img class='center' alt="Picture illustrating that we have to add half the screen's width to dx" src='Pictures/projection_final.png'>

          </br></br>

          <!--Slider!-->
          <label for="canvas2-sliderX">X position</label></br>
          <input type="range" id="canvas2-sliderX" name="sliderX" min="32" max="288"></br>
          <label for="canvas2-sliderY">Y position</label></br>
          <input type="range" id="canvas2-sliderY" name="sliderY" min="32" max="192"></br>

          <canvas id="canvas2" class="canvasborder"
            aria-label="Image with a sexy tree with a line showcasing perspective projection" role="img" width="320"
            height="320"></canvas>

          <p>Whew! Nice job!</p>

          </br></br></br>

          <h2 class="headertext">Oh! Trigonometry...</h2></br>

          <p>Now, at this point you could be satisfied. But at this point you might ask yourself, "how do we determine
            how far the viewer should sit from the screen?" You could actually set it to any arbitrary point, nobody
            would really care. BUT, you could also use FOV (Field of View) to determine how far or near the viewer
            should sit! This means trigonometry YEAHHHHHHH</p>

          <img class='center' alt="Picture describing our goal to find the viewer's distance from the screen" src='Pictures/projection_fov_1.png'></br>

          <p>More crude drawings. You love them, you really do.</br>Our goal this time is to find "dy" using our FOV
            angle and our screen width. The former we can set ourselves and the latter we should already know!</br>(Oh,
            and FOV Angle is halved because the dy line cuts the angle in half)</p>

          <img class='center' alt="A triangle between the viewer, half the screen's width, and the viewer screen distance." src='Pictures/projection_fov_2.png'></br>

          <p>Oh hey look a triangle</br>Now we know that the opposite side is half of the screen's width. We've got an
            angle, the length of the opposite side, and we need to know the length of the adjacent side.</br>The tangent
            of an angle <u>(FOV Angle / 2)</u> is equal to the length of the opposite side <u>(Screen Width / 2)</u>
            divided by the length of adjacent side <u>(dy)</u>, so let's use that!</p>

          <img class='center' alt="Tangent of half our FOV is equal to half our screen width divided by the viewer screen distance." src='Pictures/projection_fov_3.png'></br>

          <p>Now we're getting somewhere!</br>Finally, let's solve for dy by rearranging the equation using basic
            algebra. If you're lost then I suggest it's time to hit the books, dweebenheimer!</br>(It's really simple
            though, multiply by dy on both sides then divide by Tan(FOV/2) on both sides)</p>

          <img class='center' alt="Viewer screen distance half our screen's width divided by the Tangent of half our FOV." src='Pictures/projection_fov_4.png'></br>

          <p>That gives us dy = Half of Screen Width / Tan(Half of FOV). Not too bad, huh?</br>Now check it!</p>

          <!--Slider!-->
          <label for="canvas3-sliderX">X position</label></br>
          <input type="range" id="canvas3-sliderX" name="sliderX" min="32" max="288"></br>
          <label for="canvas3-sliderY">Y position</label></br>
          <input type="range" id="canvas3-sliderY" name="sliderY" min="32" max="192"></br>
          <label for="canvas3-sliderFOV">Field of View</label></br>
          <input type="range" id="canvas3-sliderFOV" name="sliderFOV" min="60" max="120"></br>

          <canvas id="canvas3" class="canvasborder"
            aria-label="Image with a sexy tree with a line showcasing perspective projection and FOV slider" role="img"
            width="320" height="400"></canvas>

          <p>Try playing around with those values! Note how when the FOV is narrow, the scale factor isn't quite as
            profound as when the FOV is very wide!</br>At this point, we now have EVERYTHING we need in order to do some
            SUPER SCALIN'!</p>

          <h2 class="headertext">Let's do some SUPER SCALING on the <a href="defining3.html">Next Page</a>!</h2>

        </div>
      </div>
    </main>

    <!--Footer-->
    <footer class="row">
      <div class="col-lg p-4 bg-dark text-white">
        <h2 class="text-center">2022 Michael Sanders</h2>
        <p class="text-center">Contact me at <a href="mailto: terrysanders256@gmail.com">terrysanders256@gmail.com</a>
          for questions or anything else!</p>
        <p id="modified" class="text-center">
      </div>
    </footer>
  </div>

</body>

</html>